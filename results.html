<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Results - Server Room Lockdown</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <h2>üéâ Mission Complete!</h2>

    <p><strong>Player:</strong> <span id="playerName"></span></p>
    <p><strong>Chapter:</strong> <span id="chapterTitle"></span></p>
    <p><strong>Score:</strong> ‚úÖ <span id="score"></span> | ‚ùå <span id="fail"></span></p>
    <p><strong>Completed on:</strong> <span id="date"></span></p>

    <div class="button-group">
      <button onclick="goToChapters()">üîÅ Play Another Chapter</button>
      <button onclick="downloadCertificate()">üéì Download Certificate</button>
      <button onclick="shareWhatsApp()">üì§ Share via WhatsApp</button>
      <button onclick="submitLeaderboard()">üìä Submit to Leaderboard</button>
      <a href="https://forms.gle/YOUR_FEEDBACK_FORM" target="_blank"><button>‚úçÔ∏è Submit Feedback</button></a>
    </div>
  </div>

  <script>
    const playerName = localStorage.getItem("playerName") || "Player";
    const chapterId = localStorage.getItem("selectedChapter");
    const chapterTitle = localStorage.getItem("selectedChapterTitle") || "Unknown";
    const score = localStorage.getItem(`chapter_${chapterId}_score`) || 0;
    const fail = localStorage.getItem(`chapter_${chapterId}_fail`) || 0;
    const date = localStorage.getItem(`chapter_${chapterId}_date`) || new Date().toLocaleString();

    document.getElementById("playerName").textContent = playerName;
    document.getElementById("chapterTitle").textContent = chapterTitle;
    document.getElementById("score").textContent = score;
    document.getElementById("fail").textContent = fail;
    document.getElementById("date").textContent = date;

    function goToChapters() {
      window.location.href = "chapters.html";
    }

    function downloadCertificate() {
      const text = `Certificate of Completion\n\nThis certifies that ${playerName} successfully completed ${chapterTitle} on ${date}.\nScore: ${score} correct, ${fail} incorrect.`;
      const blob = new Blob([text], { type: "text/plain" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = `${playerName}_${chapterTitle}_Certificate.txt`;
      link.click();
    }

    function shareWhatsApp() {
      const message = `I just completed '${chapterTitle}' in the Server Room Lockdown game! ‚úÖ Score: ${score}, ‚ùå Fail: ${fail}. Try it now: https://test-iq23.github.io/SERVER-ROOM-GAME/`;
      const url = `https://wa.me/?text=${encodeURIComponent(message)}`;
      window.open(url, "_blank");
    }

    function submitLeaderboard() {
      const formURL = "https://docs.google.com/forms/d/e/YOUR_FORM_ID/viewform";
      const params = new URLSearchParams({
        "entry.1234567890": playerName, // Replace with your actual Google Form entry IDs
        "entry.2345678901": chapterTitle,
        "entry.3456789012": score,
        "entry.4567890123": fail,
        "entry.5678901234": date
      });
      window.open(`${formURL}?${params.toString()}`, "_blank");
    }
  </script>
</body>
</html>
